var ie=Object.defineProperty;var W=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var Z=(m,n,e)=>n in m?ie(m,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):m[n]=e,ee=(m,n)=>{for(var e in n||(n={}))de.call(n,e)&&Z(m,e,n[e]);if(W)for(var e of W(n))me.call(n,e)&&Z(m,e,n[e]);return m};import{J as H,G as ce,ah as te,r as d,o as C,l as T,w as u,f as l,u as t,i as h,t as $,j as k,B as P,e as z,aY as pe,U as se,a0 as le,k as V,aE as _e,L as q,M as A,aT as fe,T as ye,h as O,x as oe,y as ve,m as G,F as Ce,aj as be,V as ge}from"./vendor.305b0474.js";import{j as Fe,u as Te,m as K,e as ae,c as Y,g as j,o as b}from"./main.f0d84bce.js";const we={props:{row:{type:Object,default:null},table:{type:Object,default:null},loadData:{type:Function,default:null}},setup(m){const n=m,e=Fe();Te();const{t:i}=H(),v=K();ce();const f=ae(),c=Y();te("utils");async function p(g){await v.fetchCustomField(g),c.openModal({title:i("settings.custom_fields.edit_custom_field"),componentName:"CustomFieldModal",size:"sm",data:g,refreshData:n.loadData})}async function B(g){e.openDialog({title:i("general.are_you_sure"),message:i("settings.custom_fields.custom_field_confirm_delete"),yesLabel:i("general.ok"),noLabel:i("general.cancel"),variant:"danger",hideNoButton:!1,size:"lg"}).then(async F=>{F&&(await v.deleteCustomFields(g),n.loadData&&n.loadData())})}return(g,F)=>{const y=d("BaseIcon"),D=d("BaseDropdownItem"),I=d("BaseDropdown");return C(),T(I,null,{activator:u(()=>[l(y,{name:"DotsHorizontalIcon",class:"h-5 text-gray-500"})]),default:u(()=>[t(f).hasAbilities(t(j).EDIT_CUSTOM_FIELDS)?(C(),T(D,{key:0,onClick:F[0]||(F[0]=o=>p(m.row.id))},{default:u(()=>[l(y,{name:"PencilIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),h(" "+$(g.$t("general.edit")),1)]),_:1})):k("",!0),t(f).hasAbilities(t(j).DELETE_CUSTOM_FIELDS)?(C(),T(D,{key:1,onClick:F[1]||(F[1]=o=>B(m.row.id))},{default:u(()=>[l(y,{name:"TrashIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),h(" "+$(g.$t("general.delete")),1)]),_:1})):k("",!0)]),_:1})}}},$e={class:"flex items-center mt-1"},De={emits:["onAdd"],setup(m,{emit:n}){const e=P(null);function i(){if(e.value==null||e.value==""||e.value==null)return!0;n("onAdd",e.value),e.value=null}return(v,f)=>{const c=d("BaseInput"),p=d("BaseIcon");return C(),z("div",$e,[l(c,{modelValue:e.value,"onUpdate:modelValue":f[0]||(f[0]=B=>e.value=B),type:"text",class:"w-full md:w-96",placeholder:v.$t("settings.custom_fields.press_enter_to_add"),onClick:i,onKeydown:pe(se(i,["prevent","stop"]),["enter"])},null,8,["modelValue","placeholder","onKeydown"]),l(p,{name:"PlusCircleIcon",class:"ml-1 text-primary-500 cursor-pointer",onClick:i})])}}};function Ie(m){switch(m){case"../../custom-fields/types/DateTimeType.vue":return b(()=>import("./DateTimeType.68aa6ea9.js"),["assets/DateTimeType.68aa6ea9.js","assets/vendor.305b0474.js"]);case"../../custom-fields/types/DateType.vue":return b(()=>import("./DateType.2aec21af.js"),["assets/DateType.2aec21af.js","assets/vendor.305b0474.js"]);case"../../custom-fields/types/DecimalType.vue":return b(()=>import("./DecimalType.d26835e4.js"),["assets/DecimalType.d26835e4.js","assets/vendor.305b0474.js"]);case"../../custom-fields/types/DropdownType.vue":return b(()=>import("./DropdownType.1cc0ed45.js"),["assets/DropdownType.1cc0ed45.js","assets/vendor.305b0474.js"]);case"../../custom-fields/types/HiddenType.vue":return b(()=>import("./HiddenType.7b21137c.js"),["assets/HiddenType.7b21137c.js","assets/vendor.305b0474.js"]);case"../../custom-fields/types/InputType.vue":return b(()=>import("./InputType.74dce4f9.js"),["assets/InputType.74dce4f9.js","assets/vendor.305b0474.js"]);case"../../custom-fields/types/MoneyType.vue":return b(()=>import("./MoneyType.c8786212.js"),["assets/MoneyType.c8786212.js","assets/vendor.305b0474.js"]);case"../../custom-fields/types/NumberType.vue":return b(()=>import("./NumberType.f4318b02.js"),["assets/NumberType.f4318b02.js","assets/vendor.305b0474.js"]);case"../../custom-fields/types/PhoneType.vue":return b(()=>import("./PhoneType.d28e8fab.js"),["assets/PhoneType.d28e8fab.js","assets/vendor.305b0474.js"]);case"../../custom-fields/types/SwitchType.vue":return b(()=>import("./SwitchType.01375a1f.js"),["assets/SwitchType.01375a1f.js","assets/vendor.305b0474.js"]);case"../../custom-fields/types/TextAreaType.vue":return b(()=>import("./TextAreaType.3a839013.js"),["assets/TextAreaType.3a839013.js","assets/vendor.305b0474.js"]);case"../../custom-fields/types/TimeType.vue":return b(()=>import("./TimeType.5c97a0e3.js"),["assets/TimeType.5c97a0e3.js","assets/vendor.305b0474.js"]);case"../../custom-fields/types/UrlType.vue":return b(()=>import("./UrlType.cad990d4.js"),["assets/UrlType.cad990d4.js","assets/vendor.305b0474.js"]);default:return new Promise(function(n,e){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(e.bind(null,new Error("Unknown variable dynamic import: "+m)))})}}const he={class:"flex justify-between w-full"},Ve=["onSubmit"],Be={class:"overflow-y-auto max-h-[550px]"},Ee={class:"px-4 md:px-8 py-8 overflow-y-auto sm:p-6"},Se={class:"z-0 flex justify-end p-4 border-t border-solid border-gray-light border-modal-bg"},Me={setup(m){const n=Y(),e=K(),{t:i}=H();let v=P(!1);const f=le(["Customer","Invoice","Estimate","Expense","Payment"]),c=le([{label:"Hidden",value:"Hidden"},{label:"Text",value:"Input"},{label:"Textarea",value:"TextArea"},{label:"Phone",value:"Phone"},{label:"URL",value:"Url"},{label:"Number",value:"Number"},{label:"Decimal Number (hundredths order) ",value:"Decimal"},{label:"Money",value:"Money"},{label:"Select Field",value:"Dropdown"},{label:"Switch Toggle",value:"Switch"},{label:"Date",value:"Date"},{label:"Time",value:"Time"},{label:"Date & Time",value:"DateTime"}]);let p=P(c[0]);const B=V(()=>n.active&&n.componentName==="CustomFieldModal"),g=V(()=>p.value&&p.value.label==="Switch Toggle"),F=V(()=>p.value&&p.value.label==="Select Field"),y=V(()=>e.currentCustomField.type?_e(()=>Ie(`../../custom-fields/types/${e.currentCustomField.type}Type.vue`)):!1),D=V({get:()=>e.currentCustomField.is_required===1,set:s=>{const a=s?1:0;e.currentCustomField.is_required=a}}),I=V(()=>({currentCustomField:{type:{required:q.withMessage(i("validation.required"),A)},name:{required:q.withMessage(i("validation.required"),A)},label:{required:q.withMessage(i("validation.required"),A)},model_type:{required:q.withMessage(i("validation.required"),A)},order:{required:q.withMessage(i("validation.required"),A),numeric:q.withMessage(i("validation.numbers_only"),fe)},type:{required:q.withMessage(i("validation.required"),A)}}})),o=ye(I,V(()=>e));function E(){e.isEdit?p.value=c.find(s=>s.value==e.currentCustomField.type):(e.currentCustomField.model_type=f[0],e.currentCustomField.type=c[0].value,p.value=c[0])}async function U(){if(o.value.currentCustomField.$touch(),o.value.currentCustomField.$invalid)return!0;v.value=!0;let s=ee({},e.currentCustomField);if(e.currentCustomField.options&&(s.options=e.currentCustomField.options.map(S=>S.name)),s.type=="Time"&&typeof s.default_answer=="object"){let S=s&&s.default_answer&&s.default_answer.HH?s.default_answer.HH:null,M=s&&s.default_answer&&s.default_answer.mm?s.default_answer.mm:null;s&&s.default_answer&&s.default_answer.ss&&s.default_answer.ss,s.default_answer=`${S}:${M}`}await(e.isEdit?e.updateCustomField:e.addCustomField)(s),v.value=!1,n.refreshData&&n.refreshData(),N()}function x(s){e.currentCustomField.options=[{name:s},...e.currentCustomField.options]}function _(s){if(e.isEdit&&e.currentCustomField.in_use)return;e.currentCustomField.options[s].name===e.currentCustomField.default_answer&&(e.currentCustomField.default_answer=null),e.currentCustomField.options.splice(s,1)}function R(s){e.currentCustomField.type=s.value}function N(){n.closeModal(),setTimeout(()=>{e.resetCurrentCustomField(),o.value.$reset()},300)}return(s,a)=>{const S=d("BaseIcon"),M=d("BaseInput"),w=d("BaseInputGroup"),J=d("BaseMultiselect"),re=d("BaseSwitch"),ne=d("BaseInputGrid"),X=d("BaseButton"),ue=d("BaseModal");return C(),T(ue,{show:t(B),onOpen:E},{header:u(()=>[O("div",he,[h($(t(n).title)+" ",1),l(S,{name:"XIcon",class:"w-6 h-6 text-gray-500 cursor-pointer",onClick:N})])]),default:u(()=>[O("form",{action:"",onSubmit:se(U,["prevent"])},[O("div",Be,[O("div",Ee,[l(ne,{layout:"one-column"},{default:u(()=>[l(w,{label:s.$t("settings.custom_fields.name"),required:"",error:t(o).currentCustomField.name.$error&&t(o).currentCustomField.name.$errors[0].$message},{default:u(()=>[l(M,{ref:(r,L)=>{L.name=r},modelValue:t(e).currentCustomField.name,"onUpdate:modelValue":a[0]||(a[0]=r=>t(e).currentCustomField.name=r),invalid:t(o).currentCustomField.name.$error,onInput:a[1]||(a[1]=r=>t(o).currentCustomField.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),l(w,{label:s.$t("settings.custom_fields.model"),error:t(o).currentCustomField.model_type.$error&&t(o).currentCustomField.model_type.$errors[0].$message,"help-text":t(e).currentCustomField.in_use?s.$t("settings.custom_fields.model_in_use"):"",required:""},{default:u(()=>[l(J,{modelValue:t(e).currentCustomField.model_type,"onUpdate:modelValue":a[2]||(a[2]=r=>t(e).currentCustomField.model_type=r),options:t(f),"can-deselect":!1,invalid:t(o).currentCustomField.model_type.$error,searchable:!0,disabled:t(e).currentCustomField.in_use,onInput:a[3]||(a[3]=r=>t(o).currentCustomField.model_type.$touch())},null,8,["modelValue","options","invalid","disabled"])]),_:1},8,["label","error","help-text"]),l(w,{class:"flex items-center space-x-4",label:s.$t("settings.custom_fields.required")},{default:u(()=>[l(re,{modelValue:t(D),"onUpdate:modelValue":a[4]||(a[4]=r=>oe(D)?D.value=r:null)},null,8,["modelValue"])]),_:1},8,["label"]),l(w,{label:s.$t("settings.custom_fields.type"),error:t(o).currentCustomField.type.$error&&t(o).currentCustomField.type.$errors[0].$message,"help-text":t(e).currentCustomField.in_use?s.$t("settings.custom_fields.type_in_use"):"",required:""},{default:u(()=>[l(J,{modelValue:t(p),"onUpdate:modelValue":[a[5]||(a[5]=r=>oe(p)?p.value=r:p=r),R],options:t(c),invalid:t(o).currentCustomField.type.$error,disabled:t(e).currentCustomField.in_use,searchable:!0,"can-deselect":!1,object:""},null,8,["modelValue","options","invalid","disabled"])]),_:1},8,["label","error","help-text"]),l(w,{label:s.$t("settings.custom_fields.label"),required:"",error:t(o).currentCustomField.label.$error&&t(o).currentCustomField.label.$errors[0].$message},{default:u(()=>[l(M,{modelValue:t(e).currentCustomField.label,"onUpdate:modelValue":a[6]||(a[6]=r=>t(e).currentCustomField.label=r),invalid:t(o).currentCustomField.label.$error,onInput:a[7]||(a[7]=r=>t(o).currentCustomField.label.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(F)?(C(),T(w,{key:0,label:s.$t("settings.custom_fields.options")},{default:u(()=>[l(De,{onOnAdd:x}),(C(!0),z(Ce,null,ve(t(e).currentCustomField.options,(r,L)=>(C(),z("div",{key:L,class:"flex items-center mt-5"},[l(M,{modelValue:r.name,"onUpdate:modelValue":Q=>r.name=Q,class:"w-64"},null,8,["modelValue","onUpdate:modelValue"]),l(S,{name:"MinusCircleIcon",class:G(["ml-1 cursor-pointer",t(e).currentCustomField.in_use?"text-gray-300":"text-red-300"]),onClick:Q=>_(L)},null,8,["class","onClick"])]))),128))]),_:1},8,["label"])):k("",!0),l(w,{label:s.$t("settings.custom_fields.default_value"),class:"relative"},{default:u(()=>[(C(),T(be(t(y)),{modelValue:t(e).currentCustomField.default_answer,"onUpdate:modelValue":a[8]||(a[8]=r=>t(e).currentCustomField.default_answer=r),options:t(e).currentCustomField.options,"default-date-time":t(e).currentCustomField.dateTimeValue},null,8,["modelValue","options","default-date-time"]))]),_:1},8,["label"]),t(g)?k("",!0):(C(),T(w,{key:1,label:s.$t("settings.custom_fields.placeholder")},{default:u(()=>[l(M,{modelValue:t(e).currentCustomField.placeholder,"onUpdate:modelValue":a[9]||(a[9]=r=>t(e).currentCustomField.placeholder=r)},null,8,["modelValue"])]),_:1},8,["label"])),l(w,{label:s.$t("settings.custom_fields.order"),error:t(o).currentCustomField.order.$error&&t(o).currentCustomField.order.$errors[0].$message,required:""},{default:u(()=>[l(M,{modelValue:t(e).currentCustomField.order,"onUpdate:modelValue":a[10]||(a[10]=r=>t(e).currentCustomField.order=r),type:"number",invalid:t(o).currentCustomField.order.$error,onInput:a[11]||(a[11]=r=>t(o).currentCustomField.order.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),_:1})])]),O("div",Se,[l(X,{class:"mr-3",type:"button",variant:"primary-outline",onClick:N},{default:u(()=>[h($(s.$t("general.cancel")),1)]),_:1}),l(X,{variant:"primary",loading:t(v),disabled:t(v),type:"submit"},{left:u(r=>[t(v)?k("",!0):(C(),T(S,{key:0,class:G(r.class),name:"SaveIcon"},null,8,["class"]))]),default:u(()=>[h(" "+$(t(e).isEdit?s.$t("general.update"):s.$t("general.save")),1)]),_:1},8,["loading","disabled"])])],40,Ve)]),_:1},8,["show"])}}},qe={class:"text-xs text-gray-500"},je={setup(m){const n=Y(),e=K(),i=ae(),v=te("utils"),{t:f}=H(),c=P(null),p=V(()=>[{key:"name",label:f("settings.custom_fields.name"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"model_type",label:f("settings.custom_fields.model")},{key:"type",label:f("settings.custom_fields.type")},{key:"is_required",label:f("settings.custom_fields.required")},{key:"actions",label:"",tdClass:"text-right text-sm font-medium",sortable:!1}]);async function B({page:y,filter:D,sort:I}){let o={orderByField:I.fieldName||"created_at",orderBy:I.order||"desc",page:y},E=await e.fetchCustomFields(o);return{data:E.data.data,pagination:{totalPages:E.data.meta.last_page,currentPage:y,limit:5,totalCount:E.data.meta.total}}}function g(){n.openModal({title:f("settings.custom_fields.add_custom_field"),componentName:"CustomFieldModal",size:"sm",refreshData:c.value&&c.value.refresh})}async function F(){c.value&&c.value.refresh()}return(y,D)=>{const I=d("BaseIcon"),o=d("BaseButton"),E=d("BaseBadge"),U=d("BaseTable"),x=d("BaseSettingCard");return C(),T(x,{title:y.$t("settings.menu_title.custom_fields"),description:y.$t("settings.custom_fields.section_description")},{action:u(()=>[t(i).hasAbilities(t(j).CREATE_CUSTOM_FIELDS)?(C(),T(o,{key:0,variant:"primary-outline",onClick:g},{left:u(_=>[l(I,{class:G(_.class),name:"PlusIcon"},null,8,["class"]),h(" "+$(y.$t("settings.custom_fields.add_custom_field")),1)]),_:1})):k("",!0)]),default:u(()=>[l(Me),l(U,{ref:(_,R)=>{R.table=_,c.value=_},data:B,columns:t(p),class:"mt-16"},ge({"cell-name":u(({row:_})=>[h($(_.data.name)+" ",1),O("span",qe," ("+$(_.data.slug)+")",1)]),"cell-is_required":u(({row:_})=>[l(E,{"bg-color":t(v).getBadgeStatusColor(_.data.is_required?"YES":"NO").bgColor,color:t(v).getBadgeStatusColor(_.data.is_required?"YES":"NO").color},{default:u(()=>[h($(_.data.is_required?y.$t("settings.custom_fields.yes"):y.$t("settings.custom_fields.no").replace("_"," ")),1)]),_:2},1032,["bg-color","color"])]),_:2},[t(i).hasAbilities([t(j).DELETE_CUSTOM_FIELDS,t(j).EDIT_CUSTOM_FIELDS])?{name:"cell-actions",fn:u(({row:_})=>[l(we,{row:_.data,table:c.value,"load-data":F},null,8,["row","table"])])}:void 0]),1032,["columns"])]),_:1},8,["title","description"])}}};export{je as default};
